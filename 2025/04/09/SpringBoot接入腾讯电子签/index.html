<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>SpringBoot接入腾讯电子签</title><meta name="description" content="666"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- 解决403图片防盗链的问题 -->    <meta content="no-referrer" name="referrer"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><link rel="stylesheet" href="/style/custom.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.5.2/css/all.css"><!--link(rel='stylesheet', href= url_for('/style/themes/monokai-sublime.min.css'))--><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><!--script(src= url_for("/js/highlight.pack.js"))--><script src="/js/highlight.min.js"></script><style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style><script src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"> </script><script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script><script src="/js/hightlight/codeBLang.js"> </script><script src="/js/hightlight/codeBlockFuction.js"> </script><script src="/js/hightlight/codeCopy.js"> </script><script src="/js/hightlight/fullScreen.js"> </script><script src="/js/hightlight/codeShrink.js"> </script><meta name="description" content="1、前言项目中需要使用到电子签名的功能，经过调研决定使用腾讯电子签。官网：腾讯电子签-电子合同-腾讯在线合同签约平台
2、接入流程2.1 结合业务需求确定接入方式。腾讯电子签产品很多，具体需要提前阅读官网或者联系售前客户之类的了解。本人在项目中接入方式是通过模板方式发起，其中模板是在腾讯的电子签工作台画好的。（也可以放在本地，通过文件上传的形式，然后发起）
2.2 首先登录腾讯电子签工作台。（以下以测试环境为例，正式环境需要企业认证注册，然后进入控制台。）

点击创建模板，上传合同模板（对应系统中的会诊病例），word和pdf都行。

添加签署区，设置一些属性（控件）名称，在调用接口时，要传参填充数据。

在要签名的地方，添加签署控件，301会诊只涉及专家也就是个人签名。

设置签署流程时，注意在添加签署人.."><meta name="generator" content="Hexo 7.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="ZQG的博客" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">ZQG's blog  </a><iframe frameborder="0" height="20" hspace="0" scrolling="no" src="https://i.tianqi.com/?c=code&amp;a=getcode&amp;id=1&amp;icon=1" width="550"></iframe><iframe clocktype="html5" frameborder="no" scrolling="no" style="overflow:hidden;border:0;margin:0;padding:0;width:140px;height:25px;" src="https://www.clocklink.com/html5embed.php?clock=047&amp;timezone=CCT&amp;color=black&amp;size=140&amp;Title=&amp;Message=&amp;Target=&amp;From=2024,1,1,0,0,0&amp;Color=black"></iframe></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">SpringBoot接入腾讯电子签</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%89%8D%E8%A8%80"><span class="toc-text">1、前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B"><span class="toc-text">2、接入流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%BB%93%E5%90%88%E4%B8%9A%E5%8A%A1%E9%9C%80%E6%B1%82%E7%A1%AE%E5%AE%9A%E6%8E%A5%E5%85%A5%E6%96%B9%E5%BC%8F%E3%80%82"><span class="toc-text">2.1 结合业务需求确定接入方式。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E9%A6%96%E5%85%88%E7%99%BB%E5%BD%95%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE%E5%B7%A5%E4%BD%9C%E5%8F%B0%E3%80%82"><span class="toc-text">2.2 首先登录腾讯电子签工作台。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E8%8E%B7%E5%8F%96%E8%B0%83%E7%94%A8%E8%85%BE%E8%AE%AF%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%BF%85%E8%A6%81%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E3%80%82"><span class="toc-text">2.3 获取调用腾讯接口的必要参数配置。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%AF%B9%E6%8E%A5%E8%85%BE%E8%AE%AFSDK%EF%BC%8C%E8%BF%9B%E8%A1%8C%E4%B8%9A%E5%8A%A1%E5%BC%80%E5%8F%91"><span class="toc-text">2.4 对接腾讯SDK，进行业务开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">2.4.1 引入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E9%80%9A%E8%BF%87%E6%A8%A1%E6%9D%BF%E5%8F%91%E8%B5%B7%E5%90%88%E5%90%8C%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E7%9A%84%E4%B8%BB%E8%A6%81%E6%B5%81%E7%A8%8B"><span class="toc-text">2.4.2 通过模板发起合同接口调用的主要流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81"><span class="toc-text">2.4.3 核心代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E7%A4%BA%E4%BE%8B"><span class="toc-text">3、示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E5%88%9B%E5%BB%BA%E5%8C%BB%E7%96%97%E4%BC%9A%E8%AF%8A%E7%94%B5%E5%AD%90%E7%AD%BE%E6%B5%81%E7%A8%8B%E6%8E%A5%E5%8F%A3"><span class="toc-text">3.1创建医疗会诊电子签流程接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E6%9F%A5%E8%AF%A2%E7%94%B5%E5%AD%90%E7%AD%BE%E5%90%88%E5%90%8C%E6%96%87%E4%BB%B6url%E6%8E%A5%E5%8F%A3"><span class="toc-text">3.2查询电子签合同文件url接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E7%94%B5%E5%AD%90%E7%AD%BE%E6%B5%81%E7%A8%8B%E5%9B%9E%E8%B0%83%E6%8E%A5%E5%8F%A3"><span class="toc-text">3.3电子签流程回调接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E9%A1%B9%E7%9B%AE%E5%AF%B9%E6%8E%A5%E6%97%B6%E5%BA%8F%E5%9B%BE"><span class="toc-text">3.4项目对接时序图</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/SpringBoot"><i class="tag post-item-tag">SpringBoot</i></a><a href="/tags/tencent"><i class="tag post-item-tag">tencent</i></a><a href="/tags/%E7%94%B5%E5%AD%90%E7%AD%BE"><i class="tag post-item-tag">电子签</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">SpringBoot接入腾讯电子签</h1><time class="has-text-grey" datetime="2025-04-09T09:42:36.000Z">2025-04-09</time><article class="mt-2 post-content"><h2 id="1、前言"><a href="#1、前言" class="headerlink" title="1、前言"></a>1、前言</h2><p>项目中需要使用到电子签名的功能，经过调研决定使用腾讯电子签。官网：<a target="_blank" rel="noopener" href="https://qian.tencent.com/">腾讯电子签-电子合同-腾讯在线合同签约平台</a></p>
<h2 id="2、接入流程"><a href="#2、接入流程" class="headerlink" title="2、接入流程"></a>2、接入流程</h2><h3 id="2-1-结合业务需求确定接入方式。"><a href="#2-1-结合业务需求确定接入方式。" class="headerlink" title="2.1 结合业务需求确定接入方式。"></a>2.1 结合业务需求确定接入方式。</h3><p>腾讯电子签产品很多，具体需要提前阅读官网或者联系售前客户之类的了解。本人在项目中接入方式是通过<strong>模板方式发起</strong>，其中模板是在腾讯的电子签工作台画好的。（也可以放在本地，通过文件上传的形式，然后发起）</p>
<h3 id="2-2-首先登录腾讯电子签工作台。"><a href="#2-2-首先登录腾讯电子签工作台。" class="headerlink" title="2.2 首先登录腾讯电子签工作台。"></a>2.2 首先登录腾讯电子签工作台。</h3><p>（以下以测试环境为例，正式环境需要企业认证注册，然后进入控制台。）</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img1.png" alt="img"></p>
<p>点击创建模板，上传合同模板（对应系统中的会诊病例），word和pdf都行。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img2.png" alt="img"></p>
<p>添加签署区，设置一些属性（控件）名称，在调用接口时，要传参填充数据。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img3.png" alt="img"></p>
<p>在要签名的地方，添加签署控件，301会诊只涉及专家也就是个人签名。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img4.png" alt="img"></p>
<p>设置签署流程时，注意在添加签署人时，要注意选择个人，然后签署区要选择已添加好的签署方名称，特别是多个专家的场景，一定要把签署区和对应签署的专家绑定起来。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img5.png" alt="img"></p>
<p>多个签署人，可以指定是否按顺序签署。注意调用腾讯接口时，默认是按顺序签署的，不按顺序，需要显示设置unorder=true参数值。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img6.png" alt="img"></p>
<p>最后保存，得到模板id，这个在调用接口是必要的参数。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img.png" alt="img"></p>
<h3 id="2-3-获取调用腾讯接口的必要参数配置。"><a href="#2-3-获取调用腾讯接口的必要参数配置。" class="headerlink" title="2.3 获取调用腾讯接口的必要参数配置。"></a>2.3 <strong>获取调用腾讯接口的必要参数配置。</strong></h3><p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img7.png" alt="img"></p>
<p><em>签名验证<strong>token</strong>，在调用<strong>API</strong>时，需要携带**secretToken</em></p>
<p><em>回调的加密<strong>key</strong>，以及回调的<strong>url</strong>地址。</em></p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img8.png" alt="img"></p>
<p>secretId. 腾讯云ak/sk (secretId/secretKey)调用<strong>API</strong>的密钥对，通过腾讯云后台<strong>CAM</strong>控制台获取</p>
<p>secretKey.腾讯云ak/sk (secretId/secretKey) 调用<strong>API</strong>的密钥对，通过腾讯云后台<strong>CAM</strong>控制台获取</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img9.png" alt="img"></p>
<p>还需要一个经办人id即管理员用户<strong>id</strong>或者员工用户<strong>id</strong>，电子签控制台获取。在<strong>更多–》组织管理</strong>可以得到。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img10.png" alt="img"></p>
<p>最后就是腾讯云API域名地址：</p>
<p>测试环境：endPoint = “ess.test.ess.tencent.cn”，fileServiceEndPoint = “file.test.ess.tencent.cn”</p>
<p>正式环境：endPoint = “ess.tencentcloudapi.com”，fileServiceEndPoint = “file.ess.tencent.cn”</p>
<h3 id="2-4-对接腾讯SDK，进行业务开发"><a href="#2-4-对接腾讯SDK，进行业务开发" class="headerlink" title="2.4 对接腾讯SDK，进行业务开发"></a>2.4 <strong>对接腾讯SDK，进行业务开发</strong></h3><h4 id="2-4-1-引入依赖"><a href="#2-4-1-引入依赖" class="headerlink" title="2.4.1 引入依赖"></a>2.4.1 <strong>引入依赖</strong></h4><p>项目中接入腾讯云SDK：使用最新的版本。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img11.png" alt="img"></p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img12.png" alt="img"></p>
<h4 id="2-4-2-通过模板发起合同接口调用的主要流程"><a href="#2-4-2-通过模板发起合同接口调用的主要流程" class="headerlink" title="2.4.2 通过模板发起合同接口调用的主要流程"></a>2.4.2 <strong>通过模板发起合同接口调用的主要流程</strong></h4><p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/image-20260219142450517.png" alt="image-20260219142450517"></p>
<p>在获取到签署流程链接后，返回给前端，生成二维码在页面展示，不使用发送短信的方式。</p>
<h4 id="2-4-3-核心代码"><a href="#2-4-3-核心代码" class="headerlink" title="2.4.3 核心代码"></a>2.4.3 核心代码</h4><p>TxElectronicSignatureConfig，对接腾讯SDK所需要的各种配置。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img13.png" alt="img"></p>
<p>TxElectronicSignatureClient，api交互的客户端。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img14.png" alt="img"></p>
<p>TxElectronicSignatureApi，项目中主要涉及到的api方法。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img15.png" alt="img"></p>
<p>TxElectronicSignatureService，对接的业务逻辑处理方法</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img16.png" alt="img"></p>
<p>TxElectronicSignatureController，对外提供的接口</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img17.png" alt="img"></p>
<h2 id="3、示例"><a href="#3、示例" class="headerlink" title="3、示例"></a>3、示例</h2><p>项目接口及数据对象说明</p>
<p>需要写明接口名称和接口访问path；数据对象需要明确写出对象定义字段和描述；做了哪些模板；</p>
<h3 id="3-1创建医疗会诊电子签流程接口"><a href="#3-1创建医疗会诊电子签流程接口" class="headerlink" title="3.1创建医疗会诊电子签流程接口"></a>3.1<strong>创建医疗会诊电子签流程接口</strong></h3><table>
<thead>
<tr>
<th>名称</th>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>接口名称</td>
<td></td>
<td>/txqian/createConsFlowByTemplate</td>
</tr>
<tr>
<td>请求方式</td>
<td>POST</td>
<td>POST提交数据</td>
</tr>
</tbody></table>
<p>请求报文格式</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数中文名称</th>
<th>参数类型</th>
<th>是否必填</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>adviceForm</td>
<td>表单信息</td>
<td>Obejct</td>
<td>是</td>
<td>MedAdviceForm类型</td>
</tr>
<tr>
<td>diagnAdvice</td>
<td>签署人的诊断建议</td>
<td>List<string></string></td>
<td>是</td>
<td>与 approvers 中签署人顺序保持一致</td>
</tr>
<tr>
<td>flowName</td>
<td>流程名称</td>
<td>String</td>
<td>是</td>
<td>长度限制为1~200个字符</td>
</tr>
<tr>
<td>approvers</td>
<td>签署人信息</td>
<td>List<txflowcreateapprover></txflowcreateapprover></td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>customData</td>
<td>自定义参数</td>
<td>String</td>
<td>是</td>
<td>json格式，回调接口会透传</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>MedAdviceForm参数名称</th>
<th>中文名称</th>
<th>参数类型</th>
<th>是否必须</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>patientName</td>
<td>患者姓名</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>sex</td>
<td>患者性别</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>age</td>
<td>患者年龄</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>consType</td>
<td>会诊类型</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>followupFlag</td>
<td>会诊类别</td>
<td>String</td>
<td>是</td>
<td>初诊，复诊</td>
</tr>
<tr>
<td>isUrgent</td>
<td>申请类型</td>
<td>String</td>
<td>是</td>
<td>普通，急诊</td>
</tr>
<tr>
<td>medCenterCode</td>
<td>会诊单位</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>applyTime</td>
<td>申请日期</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>consTime</td>
<td>会诊时间</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>experts</td>
<td>专家</td>
<td>String</td>
<td>是</td>
<td>多个专家逗号分隔</td>
</tr>
<tr>
<td>preDiagnosis</td>
<td>初步诊断</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>TxFlowCreateApprover参数名称</th>
<th>中文名称</th>
<th>参数类型</th>
<th>是否必须</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>approverName</td>
<td>签署方的姓名</td>
<td>String</td>
<td>是</td>
<td>真实姓名</td>
</tr>
<tr>
<td>approverMobile</td>
<td>签署方的手机号</td>
<td>String</td>
<td>是</td>
<td>真实手机号</td>
</tr>
<tr>
<td>approverType</td>
<td>签署方的类型</td>
<td>Long</td>
<td>是</td>
<td>0:企业B端，1:个人C端。 3:企业B端静默（自动）签署，无需签署人参与，自动签署可以参考自动签署使用说明文档。7:个人C端自动签署，适用于个人自动签场景</td>
</tr>
<tr>
<td>notifyType</td>
<td>签署人通知类型</td>
<td>String</td>
<td>是</td>
<td>sms:短信，none:无</td>
</tr>
</tbody></table>
<p>报文响应格式：</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数中文名称</th>
<th>参数类型</th>
<th>是否一定存在</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>currTime</td>
<td>服务器时间</td>
<td>Long</td>
<td>是</td>
<td>时间戳</td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>返回消息</td>
<td>string</td>
<td>否</td>
<td></td>
<td></td>
</tr>
<tr>
<td>state</td>
<td>状态码</td>
<td>int</td>
<td>是</td>
<td>1000:成功</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>数据</td>
<td>Object</td>
<td>否</td>
<td></td>
<td>FlowReturnModel类型</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>FlowReturnModel参数</th>
<th>中文名称</th>
<th>参数类型</th>
<th>是否必须</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>flowId</td>
<td>流程id(合同id)</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>signUrl</td>
<td>合同签署url</td>
<td>String</td>
<td>是</td>
<td>跳转小程序的签署链接的有效期为90天，超过有效期链接不可用</td>
</tr>
<tr>
<td>downloadUrl</td>
<td>合同下载url</td>
<td>String</td>
<td>是</td>
<td>有效期5分钟</td>
</tr>
</tbody></table>
<p>响应示例：</p>
<p>{</p>
<p>  “state”: 1000,</p>
<p>  “message”: “”,</p>
<p>  “currTime”: 1,</p>
<p>  “data”: {</p>
<p>​    “flowId”: “”,</p>
<p>​    “signUrl”: “”,</p>
<p>​    “downloadUrl”: “”</p>
<p>  }</p>
<p>}</p>
<p>目前共创建了8个模板，最多支持8个专家同时参与会诊。</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img18.png" alt="img"></p>
<h3 id="3-2查询电子签合同文件url接口"><a href="#3-2查询电子签合同文件url接口" class="headerlink" title="3.2查询电子签合同文件url接口"></a>3.2查询电子签合同文件url接口</h3><table>
<thead>
<tr>
<th>名称</th>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>接口名称</td>
<td></td>
<td>/txqian/getFlowFileUrl</td>
</tr>
<tr>
<td>请求方式</td>
<td>GET</td>
<td>GET请求</td>
</tr>
</tbody></table>
<p>请求报文格式</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数中文名称</th>
<th>参数类型</th>
<th>是否必填</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>flowId</td>
<td>流程id</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
</tbody></table>
<p>报文响应格式：</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数中文名称</th>
<th>参数类型</th>
<th>是否一定存在</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>currTime</td>
<td>服务器时间</td>
<td>Long</td>
<td>是</td>
<td>时间戳</td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>返回消息</td>
<td>string</td>
<td>否</td>
<td></td>
<td></td>
</tr>
<tr>
<td>state</td>
<td>状态码</td>
<td>int</td>
<td>是</td>
<td>1000:成功</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>数据</td>
<td>String</td>
<td>否</td>
<td></td>
<td>url地址，有效期五分钟</td>
</tr>
</tbody></table>
<p>响应示例:</p>
<p>{</p>
<p>  “state”: 1000,</p>
<p>  “message”: “”,</p>
<p>  “currTime”: 1,</p>
<p>  “data”: “”</p>
<p>}</p>
<h3 id="3-3电子签流程回调接口"><a href="#3-3电子签流程回调接口" class="headerlink" title="3.3电子签流程回调接口"></a>3.3电子签流程回调接口</h3><table>
<thead>
<tr>
<th>名称</th>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>接口名称</td>
<td></td>
<td>/txqian/callBackFlow</td>
</tr>
<tr>
<td>请求方式</td>
<td>POST</td>
<td>POST接收数据</td>
</tr>
</tbody></table>
<p>请求报文格式</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数中文名称</th>
<th>参数类型</th>
<th>是否必填</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>encrypt</td>
<td>数据</td>
<td>String</td>
<td>是</td>
<td>base64后的密文，解密后是CallBackInfoModel类型</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>CallBackInfoModelr参数名称</th>
<th>中文名称</th>
<th>参数类型</th>
<th>是否必须</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>msgId</td>
<td>回调消息id</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>msgType</td>
<td>回调消息类型</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>msgVersion</td>
<td>回调消息版本号</td>
<td>String</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>msgData</td>
<td>回调消息结构体</td>
<td>Object</td>
<td>是</td>
<td>不同的回调消息，结构不同</td>
</tr>
</tbody></table>
<p>报文响应格式：</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数中文名称</th>
<th>参数类型</th>
<th>是否一定存在</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>currTime</td>
<td>服务器时间</td>
<td>Long</td>
<td>是</td>
<td>时间戳</td>
<td></td>
</tr>
<tr>
<td>message</td>
<td>返回消息</td>
<td>string</td>
<td>否</td>
<td></td>
<td></td>
</tr>
<tr>
<td>state</td>
<td>状态码</td>
<td>int</td>
<td>是</td>
<td>1000:成功</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>数据</td>
<td>Object</td>
<td>否</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>响应示例:</p>
<p>{</p>
<p>  “state”: 1000,</p>
<p>  “message”: “”,</p>
<p>  “currTime”: 1,</p>
<p>  “data”: null</p>
<p>}</p>
<h3 id="3-4项目对接时序图"><a href="#3-4项目对接时序图" class="headerlink" title="3.4项目对接时序图"></a>3.4项目对接时序图</h3><p>需要从用户操作开始——&gt;业务系统接口——&gt;腾讯接口——&gt;回调</p>
<p><img src="/2025/04/09/SpringBoot%E6%8E%A5%E5%85%A5%E8%85%BE%E8%AE%AF%E7%94%B5%E5%AD%90%E7%AD%BE/img19.jpeg" alt="img"></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2026/02/21/%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0/" title="大文件分片上传"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: 大文件分片上传</span></a><a class="button is-default" href="/2025/03/27/python%E5%AD%A6%E4%B9%A0/" title="python学习"><span class="has-text-weight-semibold">Next: python学习</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="zhangqingguo/zhangqingguo.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/zhangqingguo"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> ZQG 2026</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"> </script></body></html>